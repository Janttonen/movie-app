<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
<title>Movie App</title>
<meta name="viewport" content="initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
	rel="stylesheet">
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<link th:href="@{/cssfolder/main.css}" rel="stylesheet" />
</head>

<body>
	<div th:replace="fragments/header"></div>
	<div class="container">
		<div class="row justify-content-md-center">
			<div class="col col-lg-11">
		<h3>EditPage</h3>

		<a class="btn btn-outline-success" role="button"
					href="/admin/add-movie">(+) Add movie</a>
		
		<table>
			<tr th:each="movie : ${movies}">
				<td th:id="${movie.id}"></td>
				<td th:text="${movie.title}"></td>
				<td><a th:href="@{/movie-app/{id}(id=${movie.id})}" type="button"
										class="btn btn-outline-dark">View</a></td>
				<td><a class="btn btn-outline-dark" role="button"
					th:href="@{/admin/edit-movie/{id}(id=${movie.id})}">Edit</a></td>
				<td><span th:if="${#lists.isEmpty(movie.reviews)}">No reviews yet</span>
				
				
				<span th:unless="${#lists.isEmpty(movie.reviews)}">
				<a class="btn btn-outline-dark"
					th:href="@{/movie-app/all-reviews/{id}(id=${movie.id})}"
					role="button">Delete reviews</a></span></td>
				<td><a class="btn btn-danger" role="button"
					th:href="@{/admin/delete-movie/{id}(id=${movie.id})}">Delete</a></td>
			</tr>
		</table>

	</div>
	</div>
	</div>
</body>
</html>